webpackJsonp([56],{1825:function(e,t,r){(function(t){function r(){return Object.assign?Object.assign:function(e,t,r,n){for(var a=1;a<arguments.length;a++)s(Object(arguments[a]),function(t,r){e[r]=t});return e}}function n(){function e(){}return Object.create?function(e,t,r,n){var a=o(arguments,1);return d.apply(this,[Object.create(e)].concat(a))}:function(t,r,n,a){var i=o(arguments,1);return e.prototype=t,d.apply(this,[new e].concat(i))}}function a(){return String.prototype.trim?function(e){return String.prototype.trim.call(e)}:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}}function i(e,t){return function(){return t.apply(e,Array.prototype.slice.call(arguments,0))}}function o(e,t){return Array.prototype.slice.call(e,t||0)}function s(e,t){l(e,function(e,r){return t(e,r),!1})}function c(e,t){var r=u(e)?[]:{};return l(e,function(e,n){return r[n]=t(e,n),!1}),r}function l(e,t){if(u(e)){for(var r=0;r<e.length;r++)if(t(e[r],r))return e[r]}else for(var n in e)if(e.hasOwnProperty(n)&&t(e[n],n))return e[n]}function u(e){return null!=e&&"function"!=typeof e&&"number"==typeof e.length}function m(e){return e&&"[object Function]"==={}.toString.call(e)}function p(e){return e&&"[object Object]"==={}.toString.call(e)}var d=r(),f=n(),b=a(),h="undefined"!=typeof window?window:t;e.exports={assign:d,create:f,trim:b,bind:i,slice:o,each:s,map:c,pluck:l,isList:u,isFunction:m,isObject:p,Global:h}}).call(t,r(65))},2025:function(e,t,r){function n(e,t){var r={_seenPlugins:[],_namespacePrefix:"",_namespaceRegexp:null,_legalNamespace:/^[a-zA-Z0-9_\-]+$/,_storage:function(){if(!this.enabled)throw new Error("store.js: No supported storage has been added! Add one (e.g store.addStorage(require('store/storages/cookieStorage')) or use a build with more built-in storages (e.g https://github.com/marcuswestin/store.js/tree/master/dist/store.legacy.min.js)");return this._storage.resolved},_testStorage:function(e){try{var t="__storejs__test__";e.write(t,t);var r=e.read(t)===t;return e.remove(t),r}catch(e){return!1}},_assignPluginFnProp:function(e,t){var r=this[t];this[t]=function(){function t(){if(r)return s(arguments,function(e,t){n[t]=e}),r.apply(a,n)}var n=i(arguments,0),a=this,o=[t].concat(n);return e.apply(a,o)}},_serialize:function(e){return JSON.stringify(e)},_deserialize:function(e,t){if(!e)return t;var r="";try{r=JSON.parse(e)}catch(t){r=e}return void 0!==r?r:t}},n=c(r,p);return s(e,function(e){n.addStorage(e)}),s(t,function(e){n.addPlugin(e)}),n}var a=r(1825),i=a.slice,o=a.pluck,s=a.each,c=a.create,l=a.isList,u=a.isFunction,m=a.isObject;e.exports={createStore:n};var p={version:"2.0.4",enabled:!1,storage:null,addStorage:function(e){this.enabled||this._testStorage(e)&&(this._storage.resolved=e,this.enabled=!0,this.storage=e.name)},addPlugin:function(e){var t=this;if(l(e))return void s(e,function(e){t.addPlugin(e)});if(!o(this._seenPlugins,function(t){return e===t})){if(this._seenPlugins.push(e),!u(e))throw new Error("Plugins must be function values that return objects");var r=e.call(this);if(!m(r))throw new Error("Plugins must return an object of function properties");s(r,function(r,n){if(!u(r))throw new Error("Bad plugin property: "+n+" from plugin "+e.name+". Plugins should only return functions.");t._assignPluginFnProp(r,n)})}},get:function(e,t){var r=this._storage().read(this._namespacePrefix+e);return this._deserialize(r,t)},set:function(e,t){return void 0===t?this.remove(e):(this._storage().write(this._namespacePrefix+e,this._serialize(t)),t)},remove:function(e){this._storage().remove(this._namespacePrefix+e)},each:function(e){var t=this;this._storage().each(function(r,n){e(t._deserialize(r),n.replace(t._namespaceRegexp,""))})},clearAll:function(){this._storage().clearAll()},hasNamespace:function(e){return this._namespacePrefix=="__storejs_"+e+"_"},namespace:function(e){if(!this._legalNamespace.test(e))throw new Error("store.js namespaces can only have alhpanumerics + underscores and dashes");var t="__storejs_"+e+"_";return c(this,{_namespacePrefix:t,_namespaceRegexp:t?new RegExp("^"+t):null})},createStore:function(e,t){return n(e,t)}}},2026:function(e,t){function r(e){return s[e]}function n(e,t){s[e]=t}function a(e){for(var t in s)s.hasOwnProperty(t)&&e(s[t],t)}function i(e){delete s[e]}function o(e){s={}}e.exports={name:"memoryStorage",read:r,write:n,each:a,remove:i,clearAll:o};var s={}},2248:function(e,t,r){"use strict";var n=r(138);t.a={getNoticesOfType:function(e,t){return n.a.get("notices/me",{params:{type:e,limit:t}}).then(function(e){return e.data.results}).catch(function(){return[]})}}},2370:function(e,t,r){function n(){return u.localStorage}function a(e){return n().getItem(e)}function i(e,t){return n().setItem(e,t)}function o(e){for(var t=n().length-1;t>=0;t--){var r=n().key(t);e(a(r),r)}}function s(e){return n().removeItem(e)}function c(){return n().clear()}var l=r(1825),u=l.Global;e.exports={name:"localStorage",read:a,write:i,each:o,remove:s,clearAll:c}},2711:function(e,t,r){var n=r(3557);"string"==typeof n&&(n=[[e.i,n,""]]);r(1404)(n,{});n.locals&&(e.exports=n.locals)},2712:function(e,t,r){var n=r(3558);"string"==typeof n&&(n=[[e.i,n,""]]);r(1404)(n,{});n.locals&&(e.exports=n.locals)},3276:function(e,t,r){"use strict";function n(e,t,r,n,a){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}function a(){var e,t=r.i(l.observable)({data:r.i(l.observable)(r.i(l.asMap)()),membership:r.i(l.observable)(r.i(l.asMap)()),storage:null}),a=parseInt(d.a.helloBarId,10);return d.a.helloBarId&&(h.includes(a)||isNaN(a))||!m.a.features.notice.smart_bar?void o.a.ud.ud_hellobar():(u.a.getNoticesOfType("smart_bar",1).then(r.i(l.action)(function(e){if(!e.length)return void o.a.ud.ud_hellobar();var r=c()(e).first();t.data.merge(r.data||{}),t.membership.merge(r.membership||{});var n=void 0,a=t.membership.get("end_time");if(a)n=new Date(a);else{var i=new Date;n=new Date(i.setDate(i.getDate()+14))}t.storage=f(t.data.get("id"),n)})),e={data:t.data,membership:t.membership,hide:function(){t.storage.set("hidden",!0)},get isHidden(){return!t.data.get("id")||t.storage&&t.storage.get("hidden")}},n(e,"hide",[l.action],Object.getOwnPropertyDescriptor(e,"hide"),e),n(e,"isHidden",[l.computed],Object.getOwnPropertyDescriptor(e,"isHidden"),e),e)}t.a=a;var i=r(2),o=r.n(i),s=r(17),c=r.n(s),l=r(32),u=(r.n(l),r(2248)),m=r(21),p=r(3405),d=r(77),f=c.a.partial(p.a,"smartBarStorage"),b=4278,h=[b]},3277:function(e,t,r){"use strict";function n(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function a(e,t,r,n,a){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}r.d(t,"a",function(){return E});var i,o,s,c,l,u,m=r(17),p=r.n(m),d=r(0),f=r.n(d),b=r(32),h=(r.n(b),r(30)),g=(r.n(h),r(75)),_=r.n(g),v=r(2711),y=r.n(v),w=r(139),S=r(43),x=r.n(S),O=21600,P=86400,j=_()(function(e){var t=e.remainingSeconds,r=e.shouldShowSeconds,n=w.a.duration(1e3*t),a=x()(n.hours()).format("00"),i=x()(n.minutes()).format("00"),o=x()(n.seconds()).format("00"),s=a+"h "+i+"m";return r&&(s+=" "+o+"s"),f.a.createElement("span",{"data-purpose":"timer-countdown"},interpolate(gettext("Ends in %(timeRemainingText)s"),{timeRemainingText:s},!0))},y.a),E=(i=_()(y.a,{allowMultiple:!0}),r.i(h.observer)(o=i((u=l=function(e){function t(){var r,a,i;babelHelpers.classCallCheck(this,t);for(var o=arguments.length,s=Array(o),l=0;l<o;l++)s[l]=arguments[l];return r=a=babelHelpers.possibleConstructorReturn(this,e.call.apply(e,[this].concat(s))),n(a,"remainingSeconds",c,a),a.tickHandler=null,i=r,babelHelpers.possibleConstructorReturn(a,i)}return babelHelpers.inherits(t,e),t.prototype.componentWillMount=function(){var e=this;this.remainingSeconds=r.i(w.a)(this.props.endTime).diff(r.i(w.a)(),"seconds"),0<this.remainingSeconds&&this.remainingSeconds<=O&&(this.tickHandler=setInterval(function(){e.decrementRemainingTime()},1e3))},t.prototype.componentWillUnmount=function(){null!==this.tickHandler&&clearInterval(this.tickHandler)},t.prototype.decrementRemainingTime=function(){this.remainingSeconds<1?clearInterval(this.tickHandler):this.remainingSeconds-=1},t.prototype.render=function(){var e=void 0;return e=0<this.remainingSeconds&&this.remainingSeconds<=O?f.a.createElement(j,{remainingSeconds:this.remainingSeconds,shouldShowSeconds:this.props.shouldShowSeconds}):O<this.remainingSeconds&&this.remainingSeconds<=P?f.a.createElement("span",{"data-purpose":"timer-ends-today"},gettext("Ends today!")):P<this.remainingSeconds&&this.remainingSeconds<=this.props.daysToShowTimer*P?f.a.createElement("span",{"data-purpose":"timer-x-days-left"},interpolate(gettext("%(daysRemaining)s days left!"),{daysRemaining:Math.ceil(this.remainingSeconds/P)},!0)):null,f.a.createElement("div",{styleName:"timer-container"},e)},t}(d.Component),l.propTypes={daysToShowTimer:function(e,t){return p.a.isFinite(e[t])&&e[t]>=3?null:new Error("Invalid prop "+t+". Must be be a Number greater than or equal to 3")},endTime:d.PropTypes.instanceOf(Date).isRequired,shouldShowSeconds:d.PropTypes.bool},l.defaultProps={shouldShowSeconds:!0,daysToShowTimer:3},s=u,a(s.prototype,"componentWillMount",[b.action],Object.getOwnPropertyDescriptor(s.prototype,"componentWillMount"),s.prototype),c=a(s.prototype,"remainingSeconds",[b.observable],{enumerable:!0,initializer:null}),a(s.prototype,"decrementRemainingTime",[b.action],Object.getOwnPropertyDescriptor(s.prototype,"decrementRemainingTime"),s.prototype),o=s))||o)||o)},3278:function(e,t,r){"use strict";r.d(t,"a",function(){return _});var n,a,i=r(30),o=(r.n(i),r(0)),s=r.n(o),c=r(75),l=r.n(c),u=r(54),m=r(3276),p=r(3277),d=r(2712),f=r.n(d),b=r(450),h=l()(function(e){var t=e.image;return t?s.a.createElement("img",{styleName:"smart-bar__image",src:t,alt:gettext("Promotional image"),"data-purpose":"smart-bar-image"}):null},f.a),g=l()(function(e){var t=e.title,r=e.subtitle,n=e.url,a=s.a.createElement("span",{"data-purpose":"smart-bar-copy"},s.a.createElement("span",{styleName:"smart-bar__title","data-purpose":"smart-bar-title"},t),s.a.createElement("span",{styleName:"smart-bar__subtitle","data-purpose":"smart-bar-subtitle",dangerouslySetInnerHTML:{__html:r}}));return n?s.a.createElement("a",{styleName:"smart-bar__action-url",href:n,"data-purpose":"smart-bar-action-url"},a):a},f.a,{allowMultiple:!0}),_=(n=l()(f.a,{allowMultiple:!0}),r.i(i.observer)(a=n(a=function(e){function t(n){babelHelpers.classCallCheck(this,t);var a=babelHelpers.possibleConstructorReturn(this,e.call(this,n));return a.smartBarStore=r.i(m.a)(),a}return babelHelpers.inherits(t,e),t.prototype.render=function(){if(!this.smartBarStore||this.smartBarStore.isHidden)return null;var e=this.smartBarStore.data;return s.a.createElement("div",{styleName:"smart-bar"},s.a.createElement("div",{styleName:"smart-bar__content"},s.a.createElement(h,{image:e.get("image")}),s.a.createElement("div",null,s.a.createElement(g,{title:e.get("title"),subtitle:e.get("subtitle"),url:e.get("action_url")}),this.smartBarStore.data.get("enable_timer")&&s.a.createElement(p.a,{endTime:new Date(this.smartBarStore.membership.get("end_time")),shouldShowSeconds:this.smartBarStore.data.get("enable_seconds_in_timer"),daysToShowTimer:this.smartBarStore.data.get("days_to_show_timer")}))),s.a.createElement("div",{styleName:"smart-bar__close",onClick:this.smartBarStore.hide,onKeyDown:r.i(b.b)(this.smartBarStore.hide),"data-purpose":"smart-bar-hide",role:"button",tabIndex:"0"},s.a.createElement(u.a,{glyph:"close",size:"small"})))},t}(o.Component))||a)||a)},3405:function(e,t,r){"use strict";function n(e,t,r,n,a){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}function a(e,t,a){function o(e){c.expirations.delete(e)}var s,c=r.i(i.observable)({cacheKey:e+":"+t,expirations:r.i(i.observable)(r.i(i.asMap)()),expirationsCacheKey:"expiringLocalStorageFactory.expirations",storedValues:r.i(i.observable)(r.i(i.asMap)())});return c.expirations.observe(function(){var e=p.get(c.expirationsCacheKey)||{},t=Object.assign(e,r.i(i.toJS)(c.expirations));p.set(c.expirationsCacheKey,t)}),r.i(i.action)(function(){try{c.storedValues.merge(p.get(c.cacheKey)||{}),c.expirations.merge(p.get(c.expirationsCacheKey)||{})}catch(e){}var e=new Date;c.expirations.forEach(function(t,r){if(new Date(t)<e){p.remove(r);var n=p.get("expiringLocalStorageFactory.expirations");delete n[r],p.set(c.expirationsCacheKey,n),c.expirations.delete(r),c.storedValues.clear()}})})(),c.storedValues.observe(function(){p.set(c.cacheKey,c.storedValues),a&&!c.expirations.get(c.cacheKey)&&c.expirations.set(c.cacheKey,a)}),s={set:function(e,t){c.storedValues.set(e,t)},get:function(e){return c.storedValues.get(e)},delete:function(e){c.storedValues.delete(e)},clear:function(){c.storedValues.clear(),p.remove(c.cacheKey),p.remove(c.expirationsCacheKey),o(c.cacheKey)}},n(s,"set",[i.action],Object.getOwnPropertyDescriptor(s,"set"),s),n(s,"delete",[i.action],Object.getOwnPropertyDescriptor(s,"delete"),s),n(s,"clear",[i.action],Object.getOwnPropertyDescriptor(s,"clear"),s),s}t.a=a;var i=r(32),o=(r.n(i),r(2025)),s=r.n(o),c=r(2370),l=r.n(c),u=r(2026),m=r.n(u),p=s.a.createStore([l.a,m.a],[])},3557:function(e,t,r){t=e.exports=r(1403)(!1),t.push([e.i,".smart-bar-timer--timer-container--2mwOn{font-size:13px;font-weight:600}@media (min-width:992px){.smart-bar-timer--timer-container--2mwOn{font-size:18px}}",""]),t.locals={"timer-container":"smart-bar-timer--timer-container--2mwOn"}},3558:function(e,t,r){t=e.exports=r(1403)(!1),t.push([e.i,".smart-bar--smart-bar--1rOkE{background-color:#6f55a0;color:#fff;display:flex;font-size:13px;padding:10px}.smart-bar--smart-bar__action-url--1wVIX{color:#fff;cursor:default}.smart-bar--smart-bar__action-url--1wVIX:hover{color:#fff}.smart-bar--smart-bar__close--3mCup{align-self:baseline;cursor:pointer;margin-left:auto}.smart-bar--smart-bar__content--3X42a{display:flex;flex-basis:100%;justify-content:center;text-align:center}.smart-bar--smart-bar__image--1qsPM{display:none;flex-shrink:0;height:48px;margin-right:20px;width:48px}.smart-bar--smart-bar__subtitle--I38FP a{color:#fff;text-decoration:underline}.smart-bar--smart-bar__timer--MFdXn{color:#fff}.smart-bar--smart-bar__title--1LFsk{font-weight:600;margin-right:5px}@media (min-width:576px){.smart-bar--smart-bar--1rOkE{font-size:15px}.smart-bar--smart-bar__image--1qsPM{display:block}}",""]),t.locals={"smart-bar":"smart-bar--smart-bar--1rOkE","smart-bar__action-url":"smart-bar--smart-bar__action-url--1wVIX","smart-bar__close":"smart-bar--smart-bar__close--3mCup","smart-bar__content":"smart-bar--smart-bar__content--3X42a","smart-bar__image":"smart-bar--smart-bar__image--1qsPM","smart-bar__subtitle":"smart-bar--smart-bar__subtitle--I38FP","smart-bar__timer":"smart-bar--smart-bar__timer--MFdXn","smart-bar__title":"smart-bar--smart-bar__title--1LFsk"}},659:function(e,t,r){"use strict";function n(e,t){r.i(o.a)(e,".ud-component--smart-bar--app",c,t)}Object.defineProperty(t,"__esModule",{value:!0}),r.d(t,"SmartBarApp",function(){return c}),t.default=n;var a=r(0),i=r.n(a),o=r(448),s=r(3278),c=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,e.apply(this,arguments))}return babelHelpers.inherits(t,e),t.prototype.render=function(){return i.a.createElement(s.a,null)},t}(a.Component)}});